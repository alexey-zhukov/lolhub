<html>
  <head><title>lolhub: books</title></head>
  <script type="text/javascript" src="/js/books.js"></script>
  <script type="text/javascript">
    function drawbooks() {
	{% for book in books %}
    draw('book{{ book.key }}', {{ book.total_pages }}, {{ book.current_page }})
	{% endfor %}
    }
  </script>
  <link href="/css/main.css" rel="stylesheet" type="text/css"/>
  <link href="/css/books.css" rel="stylesheet" type="text/css"/>
  <body onload="drawbooks()">
    {% include toolbar %}

    {% ifequal owner.id loluser.id %}
	<p class="blog-level-title">List of your books:</p>
    {% else %}
	<p class="blog-level-title">List of books of <a href="/loluser/{{ owner.id }}">{{ owner.nickname_wrap|escape }}</a>:</p>
    {% endifequal %}
    <br/>

	{% for book in books %}
    <p class="book-description">{{ book.title|escape }}<span class="book-details">
        by {{ book.author|escape }}, {{ book.year }} ({{ book.current_page}} / {{ book.total_pages }})

    {% ifequal owner.id loluser.id %}
&nbsp;&nbsp;
    [<a href="/editbook?key={{ book.key }}">edit</a>]
    [<a href="/deletebook?key={{ book.key }}">delete</a>]
    {% endifequal %}</span></p>

    <table style="width:80%;margin-left:10%;margin-right:10%">
      <tr>
        <td>
          <canvas id="book{{ book.key }}" class="canvas" height="12">Fallback</canvas>
        </td>
      </tr>
    </table>
    <br/>

	{% endfor %}


    {% ifequal owner.id loluser.id %}
    <a class="information" href="/editbook">add new book</a>
    {% endifequal %}
  </body>
</html>
